/**
 *
 * angular-git-api v0.1
 * (c) 2015 Tim RÃ¼cker
 * License: Apache License
 */
(function(h){h.module("angular-git-api",[]).constant("angular-git-api.apiUrl","https://api.github.com/").factory("angular-git-api.initData",function(){return{}}).factory("angular-git-api.userRepos",["angular-git-api.apiUrl","$q","$http","angular-git-api.initData",function(e,d,f,b){return function(a){a=a||b.user;var c=d.defer();f.get(e+"users/"+a+"/repos").success(c.resolve);return c.promise}}]).factory("angular-git-api.getGitRepoContentList",["angular-git-api.apiUrl","$q","$http",function(e,d,f){return function(b, a,c){c=c||"";if("string"===typeof b&&"string"===typeof a){var g=d.defer();f.get(e+"repos/"+b+"/"+a+"/contents/"+c).success(g.resolve);return g.promise}}}]).factory("angular-git-api.getFilesInFolder",["angular-git-api.getGitRepoContentList","$q","$http",function(e,d,f){return function(b,a,c){if(window.atob){var g=d.defer();e(b,a,c).then(function(a){var b=0,c={},e=0,d;for(d in a)"file"===a[d].type&&b++;if(0===b)g.reject("no files");else for(var h in a)"file"===a[h].type&&function(a,b){f.get(a._links.git).success(function(d){c[a.name]= decodeURIComponent(escape(window.atob(d.content.replace(/\s/g,""))));++e===b&&g.resolve(c)})}(a[h],b)});return g.promise}}}]).factory("angular-git-api.api",["$q","$http","angular-git-api.apiUrl",function(e,d,f){return function(b){var a=e.defer();d.get(f+b).success(a.resolve);return a.promise}}]).factory("Git",["angular-git-api.api","angular-git-api.getFilesInFolder","angular-git-api.userRepos","angular-git-api.initData",function(e,d,f,b){return{api:e,getFilesInFolder:d,getUserRepos:f,init:function(a){for(var c in a)b[c]= a[c]}}}]).directive("gitFlair",["angular-git-api.api","angular-git-api.initData","$interpolate",function(e,d,f){return{compile:function(b,a){var c=a.gitflairuser?a.gitflairuser:d.user;if("undefined"===typeof c)b.html("Error: no username!");else{var g=b.html();b.html("Loading Flair...");e("users/"+c).then(function(a){var c="",c=0<g.length?f(g)({gitFlair:a}):"Error: no content!";b.html(h.element("<div>"+c+"</div>"))})}}}}])})(angular);